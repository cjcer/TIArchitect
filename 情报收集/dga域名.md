# 什么是DGA
DGA(Domain Generation Algorithm)是一种算法，作用是生成随机数.

# 什么是DGA域名
DGA域名是用dga算法生成的域名，这种域名通常硬编码在恶意软件中。

# 为什么要用DGA域名
僵尸网络的攻击实现依赖攻击者和受害主机之间的信息交互，即攻击者需要告知僵尸主机命令，僵尸主机才可发起相应的攻击，命令的下发通过命令控制信道（C&C Channel）实现。在早期中心结构的僵尸网络中，僵尸主机通常采用轮询的方法访问硬编码的C&C 域名或 IP来访问命令控制服务器，获取攻击者命令，由于硬编码的域名或IP固定且数量有限，防御人员通过逆向掌握该部分内容后可对该域名进行有效的屏蔽，阻断其命令控制途径，使其失去控制源并逐渐消亡。该种缺陷称之为中心节点失效（single-point-of-failure）。为了解决上述问题，攻击者使用Domain Flux协议来对抗防御人员的关闭，僵尸主机访问的C&C域名不再是静态硬编码，而是根据一定算法动态生成的、变化的域名，攻击者和肉鸡通信的集合点（rendezvous points）动态变化，防御人员难以关闭，该域名生成算法称之为DGA（Domain Generation Algorithm），算法的输入称为Seeds，涵盖日期、社交网络搜索热词、随机数或字典，如图1所示，生成的一串特殊字符前缀（比如kvbtltjwoxf52b68nslulzgvevh44bvatey）添加TLD后得到最终域名资源，该域名称为AGD（Algorithmically-Generated Domain），攻击者只需成功注册并让肉鸡访问到一个AGD即可实现僵尸网络的控制，而防御人员为了彻底关闭该僵尸网络，需要屏蔽所有的AGD，成本极大。

# DGA域名能在互联网上访问？
大多数dga域名在互联网环境是访问不到的，为什么？因为没有注册，黑客可以在软件中会写多个dga域名，在确认使用攻击时注册若干个，然后中招的机器接入互联网就可以与dga域名进行通信了。(全注册黑客也嫌费钱，再则多写些域名可以更好的伪装潜伏)


# dga域名检查方法？
1最直接的就是逆向恶意程序，这种办法要求高，并且只能查到已知样本的恶意dga域名。
2 网络流量分析，抓出异常的dns请求，分析确认
3 碰撞dga库，白帽子收集和用dga算法生成的域名库。

# DGA分类
DGA算法由两部分构成，种子（算法输入）和算法，可以根据种子和算法对DGA域名进行分类

1. 种子分类：
1.基于时间的种子（Time dependence）。DGA算法将会使用时间信息作为输入，如：感染主机的系统时间，http响应的时间等。
2.是否具有确定性（Determinism）。主流的DGA算法的输入是确定的，因此AGD可以被提前计算，但是也有一些DGA算法的输入是不确定的，如：Bedep[4]以欧洲中央银行每天发布的外汇参考汇率作为种子，Torpig[5]用twitter的关键词作为种子，只有在确定时间窗口内注册域名才能生效。

2. 算法分类：
现有DGA生成算法一般可以分为如下4类：
* 基于算术。该类型算法会生成一组可用ASCII编码表示的值，从而构成DGA域名，流行度最高。
* 基于哈希。用哈希值的16进制表示产生DGA域名，被使用的哈希算法常有：MD5，SHA256。
* 基于词典。该方式会从专有词典中挑选单词进行组合，减少域名字符上的随机性，迷惑性更强，字典内嵌在恶意程序中或者从公有服务中提取。
* 基于排列组合。对一个初始域名进行字符上的排列组合。

# DGA域名存活时间：
DGA域名的存活时间一般较短，大部分域名的存活时间为1-7天

# 检测方法